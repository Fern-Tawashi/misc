<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
<h1 style="font-size:medium;font-weight:normal;">「艦これ」svdataから艦隊分析入力データを生成</h1>
<div style="width:800px;">
<form id="form">
<textarea id="src" style="width:100%;height:240px;" placeholder="コピーしたデータをここに貼り付ける"></textarea>
<p style="text-align:center;"><input type="submit" value="↓　変換　↓"/></p>
<textarea readonly id="dst" style="width:100%;height:240px;"></textarea>
</form>
</div>
<script>
document.querySelector("#form").addEventListener("submit", function(e) {
  let text = document.querySelector("#src").value;
  let svdata = JSON.parse(text.split('=')[1]);
  let str = JSON.stringify(svdata.api_data.api_ship.filter(v => v.api_locked), ['api_ship_id', 'api_lv', 'api_kyouka', 'api_exp']);
  document.querySelector("#dst").textContent = str;

  event.preventDefault();
});
</script>
</body>
</html>
